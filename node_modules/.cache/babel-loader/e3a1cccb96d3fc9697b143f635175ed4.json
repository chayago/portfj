{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\HP ELITEBOOK\\\\Desktop\\\\winXP-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"C:\\\\Users\\\\HP ELITEBOOK\\\\Desktop\\\\winXP-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"C:\\\\Users\\\\HP ELITEBOOK\\\\Desktop\\\\winXP-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"C:\\\\Users\\\\HP ELITEBOOK\\\\Desktop\\\\winXP-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\HP ELITEBOOK\\\\Desktop\\\\winXP-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\HP ELITEBOOK\\\\Desktop\\\\winXP-master\\\\src\\\\WinXP\\\\index.js\",\n    _animation;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  @import url('https://fonts.googleapis.com/css?family=Noto+Sans');\\n  font-family: Tahoma, 'Noto Sans', sans-serif;\\n  height: 100%;\\n  overflow: hidden;\\n  position: relative;\\n  background: url(http://hdqwalls.com/wallpapers/abstract-yellow-simple-background-4k-cg.jpg) no-repeat center center fixed;\\n  background-size: cover;\\n  animation: \", \" 5s forwards;\\n  *:not(input):not(textarea) {\\n    user-select: none;\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  0% {\\n    filter: brightness(1) grayscale(0);\\n  }\\n  30% {\\n    filter: brightness(1) grayscale(0);\\n  }\\n  100% {\\n    filter: brightness(0.6) grayscale(1);\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useReducer, useRef, useCallback } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport useMouse from 'react-use/lib/useMouse';\nimport ga from 'react-ga';\nimport { ADD_APP, DEL_APP, FOCUS_APP, MINIMIZE_APP, TOGGLE_MAXIMIZE_APP, FOCUS_ICON, SELECT_ICONS, FOCUS_DESKTOP, START_SELECT, END_SELECT, POWER_OFF, CANCEL_POWER_OFF } from './constants/actions';\nimport { FOCUSING, POWER_STATE } from './constants';\nimport { defaultIconState, defaultAppState, appSettings } from './apps';\nimport Modal from './Modal';\nimport Footer from './Footer';\nimport Windows from './Windows';\nimport Icons from './Icons';\nimport { DashedBox } from 'src/components';\nvar initState = {\n  apps: defaultAppState,\n  nextAppID: defaultAppState.length,\n  nextZIndex: defaultAppState.length,\n  focusing: FOCUSING.WINDOW,\n  icons: defaultIconState,\n  selecting: false,\n  powerState: POWER_STATE.START\n};\n\nvar reducer = function reducer(state) {\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    type: ''\n  };\n  ga.event({\n    category: 'XP interaction',\n    action: action.type\n  });\n\n  switch (action.type) {\n    case ADD_APP:\n      var app = state.apps.find(function (_app) {\n        return _app.component === action.payload.component;\n      });\n\n      if (action.payload.multiInstance || !app) {\n        return _objectSpread({}, state, {\n          apps: [].concat(_toConsumableArray(state.apps), [_objectSpread({}, action.payload, {\n            id: state.nextAppID,\n            zIndex: state.nextZIndex\n          })]),\n          nextAppID: state.nextAppID + 1,\n          nextZIndex: state.nextZIndex + 1,\n          focusing: FOCUSING.WINDOW\n        });\n      }\n\n      var apps = state.apps.map(function (app) {\n        return app.component === action.payload.component ? _objectSpread({}, app, {\n          zIndex: state.nextZIndex,\n          minimized: false\n        }) : app;\n      });\n      return _objectSpread({}, state, {\n        apps: apps,\n        nextZIndex: state.nextZIndex + 1,\n        focusing: FOCUSING.WINDOW\n      });\n\n    case DEL_APP:\n      return _objectSpread({}, state, {\n        apps: state.apps.filter(function (app) {\n          return app.id !== action.payload;\n        }),\n        focusing: state.apps.length > 1 ? FOCUSING.WINDOW : state.icons.find(function (icon) {\n          return icon.isFocus;\n        }) ? FOCUSING.ICON : FOCUSING.DESKTOP\n      });\n\n    case FOCUS_APP:\n      {\n        var _apps = state.apps.map(function (app) {\n          return app.id === action.payload ? _objectSpread({}, app, {\n            zIndex: state.nextZIndex,\n            minimized: false\n          }) : app;\n        });\n\n        return _objectSpread({}, state, {\n          apps: _apps,\n          nextZIndex: state.nextZIndex + 1,\n          focusing: FOCUSING.WINDOW\n        });\n      }\n\n    case MINIMIZE_APP:\n      {\n        var _apps2 = state.apps.map(function (app) {\n          return app.id === action.payload ? _objectSpread({}, app, {\n            minimized: true\n          }) : app;\n        });\n\n        return _objectSpread({}, state, {\n          apps: _apps2,\n          focusing: FOCUSING.WINDOW\n        });\n      }\n\n    case TOGGLE_MAXIMIZE_APP:\n      {\n        var _apps3 = state.apps.map(function (app) {\n          return app.id === action.payload ? _objectSpread({}, app, {\n            maximized: !app.maximized\n          }) : app;\n        });\n\n        return _objectSpread({}, state, {\n          apps: _apps3,\n          focusing: FOCUSING.WINDOW\n        });\n      }\n\n    case FOCUS_ICON:\n      {\n        var icons = state.icons.map(function (icon) {\n          if (icon.id === action.payload) return _objectSpread({}, icon, {\n            isFocus: true\n          });else return _objectSpread({}, icon, {\n            isFocus: false\n          });\n        });\n        return _objectSpread({}, state, {\n          focusing: FOCUSING.ICON,\n          icons: icons\n        });\n      }\n\n    case SELECT_ICONS:\n      {\n        var _icons = state.icons.map(function (icon) {\n          return _objectSpread({}, icon, {\n            isFocus: action.payload.includes(icon.id)\n          });\n        });\n\n        return _objectSpread({}, state, {\n          icons: _icons,\n          focusing: FOCUSING.ICON\n        });\n      }\n\n    case FOCUS_DESKTOP:\n      return _objectSpread({}, state, {\n        focusing: FOCUSING.DESKTOP,\n        icons: state.icons.map(function (icon) {\n          return _objectSpread({}, icon, {\n            isFocus: false\n          });\n        })\n      });\n\n    case START_SELECT:\n      return _objectSpread({}, state, {\n        focusing: FOCUSING.DESKTOP,\n        icons: state.icons.map(function (icon) {\n          return _objectSpread({}, icon, {\n            isFocus: false\n          });\n        }),\n        selecting: action.payload\n      });\n\n    case END_SELECT:\n      return _objectSpread({}, state, {\n        selecting: null\n      });\n\n    case POWER_OFF:\n      return _objectSpread({}, state, {\n        powerState: action.payload\n      });\n\n    case CANCEL_POWER_OFF:\n      return _objectSpread({}, state, {\n        powerState: POWER_STATE.START\n      });\n\n    default:\n      return state;\n  }\n};\n\nfunction WinXP() {\n  var _useReducer = useReducer(reducer, initState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var ref = useRef(null);\n  var mouse = useMouse(ref);\n  var focusedAppId = getFocusedAppId();\n  var onFocusApp = useCallback(function (id) {\n    dispatch({\n      type: FOCUS_APP,\n      payload: id\n    });\n  }, [focusedAppId]);\n  var onMaximizeWindow = useCallback(function (id) {\n    if (focusedAppId === id && state.focusing === FOCUSING.WINDOW) {\n      dispatch({\n        type: TOGGLE_MAXIMIZE_APP,\n        payload: id\n      });\n    }\n  }, [focusedAppId]);\n  var onMinimizeWindow = useCallback(function (id) {\n    if (focusedAppId === id && state.focusing === FOCUSING.WINDOW) {\n      dispatch({\n        type: MINIMIZE_APP,\n        payload: id\n      });\n    }\n  }, [focusedAppId]);\n  var onCloseApp = useCallback(function (id) {\n    if (focusedAppId === id && state.focusing === FOCUSING.WINDOW) {\n      dispatch({\n        type: DEL_APP,\n        payload: id\n      });\n    }\n  }, [focusedAppId]);\n\n  function onMouseDownFooterApp(id) {\n    if (focusedAppId === id) {\n      dispatch({\n        type: MINIMIZE_APP,\n        payload: id\n      });\n    } else {\n      dispatch({\n        type: FOCUS_APP,\n        payload: id\n      });\n    }\n  }\n\n  function onMouseDownIcon(id) {\n    dispatch({\n      type: FOCUS_ICON,\n      payload: id\n    });\n  }\n\n  function onDoubleClickIcon(component) {\n    var appSetting = Object.values(appSettings).find(function (setting) {\n      return setting.component === component;\n    });\n    dispatch({\n      type: ADD_APP,\n      payload: appSetting\n    });\n  }\n\n  function getFocusedAppId() {\n    var focusedApp = _toConsumableArray(state.apps).sort(function (a, b) {\n      return b.zIndex - a.zIndex;\n    }).find(function (app) {\n      return !app.minimized;\n    });\n\n    return focusedApp ? focusedApp.id : -1;\n  }\n\n  function onMouseDownFooter() {\n    dispatch({\n      type: FOCUS_DESKTOP\n    });\n  }\n\n  function onClickMenuItem(o) {\n    if (o === 'Internet') dispatch({\n      type: ADD_APP,\n      payload: appSettings['Internet Explorer']\n    });else if (o === 'Minesweeper') dispatch({\n      type: ADD_APP,\n      payload: appSettings.Minesweeper\n    });else if (o === 'My Computer') dispatch({\n      type: ADD_APP,\n      payload: appSettings['My Computer']\n    });else if (o === 'Notepad') dispatch({\n      type: ADD_APP,\n      payload: appSettings.Notepad\n    });else if (o === 'Winamp') dispatch({\n      type: ADD_APP,\n      payload: appSettings.Winamp\n    });else if (o === 'Paint') dispatch({\n      type: ADD_APP,\n      payload: appSettings.Paint\n    });else if (o === 'Log Off') dispatch({\n      type: POWER_OFF,\n      payload: POWER_STATE.LOG_OFF\n    });else if (o === 'Turn Off Computer') dispatch({\n      type: POWER_OFF,\n      payload: POWER_STATE.TURN_OFF\n    });else dispatch({\n      type: ADD_APP,\n      payload: _objectSpread({}, appSettings.Error, {\n        injectProps: {\n          message: 'C:\\\\\\nApplication not found'\n        }\n      })\n    });\n  }\n\n  function onMouseDownDesktop(e) {\n    if (e.target === e.currentTarget) dispatch({\n      type: START_SELECT,\n      payload: {\n        x: mouse.docX,\n        y: mouse.docY\n      }\n    });\n  }\n\n  function onMouseUpDesktop(e) {\n    dispatch({\n      type: END_SELECT\n    });\n  }\n\n  function onIconsSelected(iconIds) {\n    dispatch({\n      type: SELECT_ICONS,\n      payload: iconIds\n    });\n  }\n\n  function onClickModalButton(text) {\n    dispatch({\n      type: CANCEL_POWER_OFF\n    });\n    dispatch({\n      type: ADD_APP,\n      payload: appSettings.Error\n    });\n  }\n\n  function onModalClose() {\n    dispatch({\n      type: CANCEL_POWER_OFF\n    });\n  }\n\n  return React.createElement(Container, {\n    ref: ref,\n    onMouseUp: onMouseUpDesktop,\n    onMouseDown: onMouseDownDesktop,\n    state: state.powerState,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296\n    },\n    __self: this\n  }, React.createElement(Icons, {\n    icons: state.icons,\n    onMouseDown: onMouseDownIcon,\n    onDoubleClick: onDoubleClickIcon,\n    displayFocus: state.focusing === FOCUSING.ICON,\n    appSettings: appSettings,\n    mouse: mouse,\n    selecting: state.selecting,\n    setSelectedIcons: onIconsSelected,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }), React.createElement(DashedBox, {\n    startPos: state.selecting,\n    mouse: mouse,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312\n    },\n    __self: this\n  }), React.createElement(Windows, {\n    apps: state.apps,\n    onMouseDown: onFocusApp,\n    onClose: onCloseApp,\n    onMinimize: onMinimizeWindow,\n    onMaximize: onMaximizeWindow,\n    focusedAppId: focusedAppId,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313\n    },\n    __self: this\n  }), React.createElement(Footer, {\n    apps: state.apps,\n    onMouseDownApp: onMouseDownFooterApp,\n    focusedAppId: focusedAppId,\n    onMouseDown: onMouseDownFooter,\n    onClickMenuItem: onClickMenuItem,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321\n    },\n    __self: this\n  }), state.powerState !== POWER_STATE.START && React.createElement(Modal, {\n    onClose: onModalClose,\n    onClickButton: onClickModalButton,\n    mode: state.powerState,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329\n    },\n    __self: this\n  }));\n}\n\nvar powerOffAnimation = keyframes(_templateObject());\nvar animation = (_animation = {}, _defineProperty(_animation, POWER_STATE.START, ''), _defineProperty(_animation, POWER_STATE.TURN_OFF, powerOffAnimation), _defineProperty(_animation, POWER_STATE.LOG_OFF, powerOffAnimation), _animation);\nvar Container = styled.div(_templateObject2(), function (_ref) {\n  var state = _ref.state;\n  return animation[state];\n});\nexport default WinXP;","map":{"version":3,"sources":["C:\\Users\\HP ELITEBOOK\\Desktop\\winXP-master\\src\\WinXP\\index.js"],"names":["React","useReducer","useRef","useCallback","styled","keyframes","useMouse","ga","ADD_APP","DEL_APP","FOCUS_APP","MINIMIZE_APP","TOGGLE_MAXIMIZE_APP","FOCUS_ICON","SELECT_ICONS","FOCUS_DESKTOP","START_SELECT","END_SELECT","POWER_OFF","CANCEL_POWER_OFF","FOCUSING","POWER_STATE","defaultIconState","defaultAppState","appSettings","Modal","Footer","Windows","Icons","DashedBox","initState","apps","nextAppID","length","nextZIndex","focusing","WINDOW","icons","selecting","powerState","START","reducer","state","action","type","event","category","app","find","_app","component","payload","multiInstance","id","zIndex","map","minimized","filter","icon","isFocus","ICON","DESKTOP","maximized","includes","WinXP","dispatch","ref","mouse","focusedAppId","getFocusedAppId","onFocusApp","onMaximizeWindow","onMinimizeWindow","onCloseApp","onMouseDownFooterApp","onMouseDownIcon","onDoubleClickIcon","appSetting","Object","values","setting","focusedApp","sort","a","b","onMouseDownFooter","onClickMenuItem","o","Minesweeper","Notepad","Winamp","Paint","LOG_OFF","TURN_OFF","Error","injectProps","message","onMouseDownDesktop","e","target","currentTarget","x","docX","y","docY","onMouseUpDesktop","onIconsSelected","iconIds","onClickModalButton","text","onModalClose","powerOffAnimation","animation","Container","div"],"mappings":"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","sourcesContent":["import React, { useReducer, useRef, useCallback } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport useMouse from 'react-use/lib/useMouse';\nimport ga from 'react-ga';\n\nimport {\n  ADD_APP,\n  DEL_APP,\n  FOCUS_APP,\n  MINIMIZE_APP,\n  TOGGLE_MAXIMIZE_APP,\n  FOCUS_ICON,\n  SELECT_ICONS,\n  FOCUS_DESKTOP,\n  START_SELECT,\n  END_SELECT,\n  POWER_OFF,\n  CANCEL_POWER_OFF,\n} from './constants/actions';\nimport { FOCUSING, POWER_STATE } from './constants';\nimport { defaultIconState, defaultAppState, appSettings } from './apps';\nimport Modal from './Modal';\nimport Footer from './Footer';\nimport Windows from './Windows';\nimport Icons from './Icons';\nimport { DashedBox } from 'src/components';\n\nconst initState = {\n  apps: defaultAppState,\n  nextAppID: defaultAppState.length,\n  nextZIndex: defaultAppState.length,\n  focusing: FOCUSING.WINDOW,\n  icons: defaultIconState,\n  selecting: false,\n  powerState: POWER_STATE.START,\n};\nconst reducer = (state, action = { type: '' }) => {\n  ga.event({\n    category: 'XP interaction',\n    action: action.type,\n  });\n  switch (action.type) {\n    case ADD_APP:\n      const app = state.apps.find(\n        _app => _app.component === action.payload.component,\n      );\n      if (action.payload.multiInstance || !app) {\n        return {\n          ...state,\n          apps: [\n            ...state.apps,\n            {\n              ...action.payload,\n              id: state.nextAppID,\n              zIndex: state.nextZIndex,\n            },\n          ],\n          nextAppID: state.nextAppID + 1,\n          nextZIndex: state.nextZIndex + 1,\n          focusing: FOCUSING.WINDOW,\n        };\n      }\n      const apps = state.apps.map(app =>\n        app.component === action.payload.component\n          ? { ...app, zIndex: state.nextZIndex, minimized: false }\n          : app,\n      );\n      return {\n        ...state,\n        apps,\n        nextZIndex: state.nextZIndex + 1,\n        focusing: FOCUSING.WINDOW,\n      };\n    case DEL_APP:\n      return {\n        ...state,\n        apps: state.apps.filter(app => app.id !== action.payload),\n        focusing:\n          state.apps.length > 1\n            ? FOCUSING.WINDOW\n            : state.icons.find(icon => icon.isFocus)\n            ? FOCUSING.ICON\n            : FOCUSING.DESKTOP,\n      };\n    case FOCUS_APP: {\n      const apps = state.apps.map(app =>\n        app.id === action.payload\n          ? { ...app, zIndex: state.nextZIndex, minimized: false }\n          : app,\n      );\n      return {\n        ...state,\n        apps,\n        nextZIndex: state.nextZIndex + 1,\n        focusing: FOCUSING.WINDOW,\n      };\n    }\n    case MINIMIZE_APP: {\n      const apps = state.apps.map(app =>\n        app.id === action.payload ? { ...app, minimized: true } : app,\n      );\n      return {\n        ...state,\n        apps,\n        focusing: FOCUSING.WINDOW,\n      };\n    }\n    case TOGGLE_MAXIMIZE_APP: {\n      const apps = state.apps.map(app =>\n        app.id === action.payload ? { ...app, maximized: !app.maximized } : app,\n      );\n      return {\n        ...state,\n        apps,\n        focusing: FOCUSING.WINDOW,\n      };\n    }\n    case FOCUS_ICON: {\n      const icons = state.icons.map(icon => {\n        if (icon.id === action.payload)\n          return {\n            ...icon,\n            isFocus: true,\n          };\n        else\n          return {\n            ...icon,\n            isFocus: false,\n          };\n      });\n      return {\n        ...state,\n        focusing: FOCUSING.ICON,\n        icons,\n      };\n    }\n    case SELECT_ICONS: {\n      const icons = state.icons.map(icon => ({\n        ...icon,\n        isFocus: action.payload.includes(icon.id),\n      }));\n      return {\n        ...state,\n        icons,\n        focusing: FOCUSING.ICON,\n      };\n    }\n    case FOCUS_DESKTOP:\n      return {\n        ...state,\n        focusing: FOCUSING.DESKTOP,\n        icons: state.icons.map(icon => ({\n          ...icon,\n          isFocus: false,\n        })),\n      };\n    case START_SELECT:\n      return {\n        ...state,\n        focusing: FOCUSING.DESKTOP,\n        icons: state.icons.map(icon => ({\n          ...icon,\n          isFocus: false,\n        })),\n        selecting: action.payload,\n      };\n    case END_SELECT:\n      return {\n        ...state,\n        selecting: null,\n      };\n    case POWER_OFF:\n      return {\n        ...state,\n        powerState: action.payload,\n      };\n    case CANCEL_POWER_OFF:\n      return {\n        ...state,\n        powerState: POWER_STATE.START,\n      };\n    default:\n      return state;\n  }\n};\nfunction WinXP() {\n  const [state, dispatch] = useReducer(reducer, initState);\n  const ref = useRef(null);\n  const mouse = useMouse(ref);\n  const focusedAppId = getFocusedAppId();\n  const onFocusApp = useCallback(\n    id => {\n      dispatch({ type: FOCUS_APP, payload: id });\n    },\n    [focusedAppId],\n  );\n  const onMaximizeWindow = useCallback(\n    id => {\n      if (focusedAppId === id && state.focusing === FOCUSING.WINDOW) {\n        dispatch({ type: TOGGLE_MAXIMIZE_APP, payload: id });\n      }\n    },\n    [focusedAppId],\n  );\n  const onMinimizeWindow = useCallback(\n    id => {\n      if (focusedAppId === id && state.focusing === FOCUSING.WINDOW) {\n        dispatch({ type: MINIMIZE_APP, payload: id });\n      }\n    },\n    [focusedAppId],\n  );\n  const onCloseApp = useCallback(\n    id => {\n      if (focusedAppId === id && state.focusing === FOCUSING.WINDOW) {\n        dispatch({ type: DEL_APP, payload: id });\n      }\n    },\n    [focusedAppId],\n  );\n  function onMouseDownFooterApp(id) {\n    if (focusedAppId === id) {\n      dispatch({ type: MINIMIZE_APP, payload: id });\n    } else {\n      dispatch({ type: FOCUS_APP, payload: id });\n    }\n  }\n  function onMouseDownIcon(id) {\n    dispatch({ type: FOCUS_ICON, payload: id });\n  }\n  function onDoubleClickIcon(component) {\n    const appSetting = Object.values(appSettings).find(\n      setting => setting.component === component,\n    );\n    dispatch({ type: ADD_APP, payload: appSetting });\n  }\n  function getFocusedAppId() {\n    const focusedApp = [...state.apps]\n      .sort((a, b) => b.zIndex - a.zIndex)\n      .find(app => !app.minimized);\n    return focusedApp ? focusedApp.id : -1;\n  }\n  function onMouseDownFooter() {\n    dispatch({ type: FOCUS_DESKTOP });\n  }\n  function onClickMenuItem(o) {\n    if (o === 'Internet')\n      dispatch({ type: ADD_APP, payload: appSettings['Internet Explorer'] });\n    else if (o === 'Minesweeper')\n      dispatch({ type: ADD_APP, payload: appSettings.Minesweeper });\n    else if (o === 'My Computer')\n      dispatch({ type: ADD_APP, payload: appSettings['My Computer'] });\n    else if (o === 'Notepad')\n      dispatch({ type: ADD_APP, payload: appSettings.Notepad });\n    else if (o === 'Winamp')\n      dispatch({ type: ADD_APP, payload: appSettings.Winamp });\n    else if (o === 'Paint')\n      dispatch({ type: ADD_APP, payload: appSettings.Paint });\n    else if (o === 'Log Off')\n      dispatch({ type: POWER_OFF, payload: POWER_STATE.LOG_OFF });\n    else if (o === 'Turn Off Computer')\n      dispatch({ type: POWER_OFF, payload: POWER_STATE.TURN_OFF });\n    else\n      dispatch({\n        type: ADD_APP,\n        payload: {\n          ...appSettings.Error,\n          injectProps: { message: 'C:\\\\\\nApplication not found' },\n        },\n      });\n  }\n  function onMouseDownDesktop(e) {\n    if (e.target === e.currentTarget)\n      dispatch({\n        type: START_SELECT,\n        payload: { x: mouse.docX, y: mouse.docY },\n      });\n  }\n  function onMouseUpDesktop(e) {\n    dispatch({ type: END_SELECT });\n  }\n  function onIconsSelected(iconIds) {\n    dispatch({ type: SELECT_ICONS, payload: iconIds });\n  }\n  function onClickModalButton(text) {\n    dispatch({ type: CANCEL_POWER_OFF });\n    dispatch({\n      type: ADD_APP,\n      payload: appSettings.Error,\n    });\n  }\n  function onModalClose() {\n    dispatch({ type: CANCEL_POWER_OFF });\n  }\n  return (\n    <Container\n      ref={ref}\n      onMouseUp={onMouseUpDesktop}\n      onMouseDown={onMouseDownDesktop}\n      state={state.powerState}\n    >\n      <Icons\n        icons={state.icons}\n        onMouseDown={onMouseDownIcon}\n        onDoubleClick={onDoubleClickIcon}\n        displayFocus={state.focusing === FOCUSING.ICON}\n        appSettings={appSettings}\n        mouse={mouse}\n        selecting={state.selecting}\n        setSelectedIcons={onIconsSelected}\n      />\n      <DashedBox startPos={state.selecting} mouse={mouse} />\n      <Windows\n        apps={state.apps}\n        onMouseDown={onFocusApp}\n        onClose={onCloseApp}\n        onMinimize={onMinimizeWindow}\n        onMaximize={onMaximizeWindow}\n        focusedAppId={focusedAppId}\n      />\n      <Footer\n        apps={state.apps}\n        onMouseDownApp={onMouseDownFooterApp}\n        focusedAppId={focusedAppId}\n        onMouseDown={onMouseDownFooter}\n        onClickMenuItem={onClickMenuItem}\n      />\n      {state.powerState !== POWER_STATE.START && (\n        <Modal\n          onClose={onModalClose}\n          onClickButton={onClickModalButton}\n          mode={state.powerState}\n        />\n      )}\n    </Container>\n  );\n}\n\nconst powerOffAnimation = keyframes`\n  0% {\n    filter: brightness(1) grayscale(0);\n  }\n  30% {\n    filter: brightness(1) grayscale(0);\n  }\n  100% {\n    filter: brightness(0.6) grayscale(1);\n  }\n`;\nconst animation = {\n  [POWER_STATE.START]: '',\n  [POWER_STATE.TURN_OFF]: powerOffAnimation,\n  [POWER_STATE.LOG_OFF]: powerOffAnimation,\n};\n\nconst Container = styled.div`\n  @import url('https://fonts.googleapis.com/css?family=Noto+Sans');\n  font-family: Tahoma, 'Noto Sans', sans-serif;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n  background: url(http://hdqwalls.com/wallpapers/abstract-yellow-simple-background-4k-cg.jpg) no-repeat center center fixed;\n  background-size: cover;\n  animation: ${({ state }) => animation[state]} 5s forwards;\n  *:not(input):not(textarea) {\n    user-select: none;\n  }\n`;\n\nexport default WinXP;\n"]},"metadata":{},"sourceType":"module"}